(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={ImageGallery:"styles_ImageGallery__pKh35",loader:"styles_loader__1dMMc"}},12:function(e,t,a){e.exports={ImageGalleryItem:"styles_ImageGalleryItem__zGrf5",ImageGalleryItemImage:"styles_ImageGalleryItemImage__Qpr_F"}},13:function(e,t,a){e.exports={Overlay:"styles_Overlay__mzuFD",Modal:"styles_Modal__3erlH"}},15:function(e,t,a){e.exports={Searchbar:"styles_Searchbar__30C8F"}},17:function(e,t,a){e.exports={Button:"styles_Button__1akWp"}},20:function(e,t,a){e.exports={App:"styles_App__fFNuF"}},48:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(7),s=a.n(c),o=a(3),u=a(15),i=a.n(u),l=a(0),m=function(e){var t=e.children;return Object(l.jsx)("header",{className:i.a.Searchbar,children:t})},h=a(6),j=a.n(h),b=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],s=r[1];return Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==c.trim()&&(t(c),s(""))},className:j.a.SearchForm,children:[Object(l.jsx)("button",{type:"submit",className:j.a.SearchFormButton,children:Object(l.jsx)("span",{className:j.a.SearchFormButtonLabel,children:"Search"})}),Object(l.jsx)("input",{onChange:function(e){s(e.currentTarget.value)},value:c,name:"inputValue",className:j.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})},p=a(4),f=a.n(p),g=a(14),d=a(9),y=a(16),O=a.n(y),_=(a(47),a(17)),x=a.n(_),v=function(e){var t=e.onClick;return Object(l.jsx)("button",{className:x.a.Button,onClick:t,type:"button",children:"Load More"})},I=a(18),S=a(19),w=function(){function e(){Object(I.a)(this,e),this.searchQuery="",this.page=1}return Object(S.a)(e,[{key:"fetchImg",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"21803734-353a7aae41d2d9aadf1e5ce14",t="https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=".concat(this.searchQuery,"&page=").concat(this.page,"&per_page=12&key=").concat("21803734-353a7aae41d2d9aadf1e5ce14"),e.prev=2,e.next=5,fetch(t);case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",console.log(e.t0));case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"pageNum",get:function(){return this.page}},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}}]),e}(),k=a(11),F=a.n(k),N=new w,B=function(e){var t=e.children,a=e.searchQuery,r=e.items,c=e.setItems,s=Object(n.useState)(!1),u=Object(o.a)(s,2),i=u[0],m=u[1];Object(n.useEffect)((function(){""!==a&&(N.resetPage(),c([]),h())}),[a]),Object(n.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[r]);var h=function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.query=a,m(!0),e.next=4,N.fetchImg();case 4:t=e.sent,c((function(e){return[].concat(Object(g.a)(e),Object(g.a)(t.hits))})),m(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("ul",{className:F.a.ImageGallery,children:t}),i&&Object(l.jsx)(O.a,{type:"ThreeDots",color:"#3f51b5",height:40,width:40,className:F.a.loader}),0===r.length||r.length<12||i?"":Object(l.jsx)(v,{onClick:function(){N.incrementPage(),h()}})]})},C=a(12),G=a.n(C),L=function(e){var t=e.item,a=e.showModal,n=e.getLargeImg;return Object(l.jsx)("li",{className:G.a.ImageGalleryItem,onClick:function(){a(),n(t.largeImageURL)},children:Object(l.jsx)("img",{src:t.webformatURL,alt:t.tags,className:G.a.ImageGalleryItemImage})})},M=a(13),E=a.n(M),Q=document.querySelector("#modal-root"),P=function(e){var t=e.largeImg,a=e.onClose;Object(n.useEffect)((function(){var e=function(e){"Escape"===e.code&&a()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[a]);return Object(c.createPortal)(Object(l.jsx)("div",{className:E.a.Overlay,onClick:function(e){e.currentTarget===e.target&&a()},children:Object(l.jsx)("div",{className:E.a.Modal,children:Object(l.jsx)("img",{src:t,alt:t})})}),Q)},q=a(20),A=a.n(q),T=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),s=Object(o.a)(c,2),u=s[0],i=s[1],h=Object(n.useState)(!1),j=Object(o.a)(h,2),p=j[0],f=j[1],g=Object(n.useState)(""),d=Object(o.a)(g,2),y=d[0],O=d[1],_=function(){f(!p)};return Object(l.jsxs)("div",{className:A.a.App,children:[Object(l.jsx)(m,{children:Object(l.jsx)(b,{onSubmit:r})}),Object(l.jsx)(B,{searchQuery:a,setItems:i,items:u,children:u.map((function(e){return Object(l.jsx)(L,{item:e,showModal:_,getLargeImg:O},e.id)}))}),p&&Object(l.jsx)(P,{largeImg:y,onClose:_})]})};s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(T,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={SearchForm:"styles_SearchForm__2mZ7H",SearchFormButton:"styles_SearchFormButton__ZhKmF",SearchFormButtonLabel:"styles_SearchFormButtonLabel__l4u2h",SearchFormInput:"styles_SearchFormInput__17ABZ"}}},[[48,1,2]]]);
//# sourceMappingURL=main.4c242830.chunk.js.map